# -*- coding: utf-8 -*-
from odoo import api, models, fields, _


class Tracking(models.Model):
    _inherit = ['mail.thread', 'mail.activity.mixin']
    _name = 'lgps.tracking'

    name = fields.Char(
        required=True,
        string=_("Tracking Id"),
        default="Autogenerated on Save"
    )

    client_id = fields.Many2one(
        comodel_name="res.partner",
        string=_("Client Account"),
        index=True,
    )

    gpsdevice_id = fields.Many2one(
        comodel_name="lgps.gpsdevice",
        string=_("Gps Device"),
        index=True,
    )

    applicant = fields.Char(
        string=_("Requested By"),
    )

    state = fields.Selection(
        [
            ('registered', _('Registrado')),
            ('active', _('Activo')),
            ('paused', _('Detenido')),
            ('finished', _('Finalizado')),
            ('billed', _('Facturado')),
        ],
        string=_("State"),
        default="registered",
    )

    category = fields.Selection(
        [
            ('event', _('Per Event')),
            ('permanent', _('Permanente')),
            ('uninterrupted ', _('Uninterrupted')),
        ],
        string=_("Category"),
        default="event",
        index=True,
    )

    driver = fields.Char(
        string=_("Driver"),
    )

    phone = fields.Text(
        string=_("Phones"),
    )

    notifications = fields.Text(
        string=_("Notifications"),
    )

    notify = fields.Boolean(
        string=_("Notify Client"),
        default=False
    )

    initial_date = fields.Date(
        default=fields.Date.today,
        string=_("Initial Date"),
    )

    final_date = fields.Date(
        default=fields.Date.today,
        string=_("Final Date"),
    )

    origin = fields.Text(
        string=_("Origin"),
    )

    destination = fields.Text(
        string=_("Destination"),
    )

    route = fields.Text(
        string=_("Route"),
    )

    observations = fields.Text(
        string=_("Observations"),
    )

    start_date = fields.Datetime(
        string=_("Activity Started at")
    )

    end_date = fields.Datetime(
        string=_("Activity finished at")
    )

    @api.model
    def create(self, vals):
        seq = self.env['ir.sequence'].next_by_code('lgps.tracking') or '/'
        vals['name'] = seq
        return super(Tracking, self).create(vals)
